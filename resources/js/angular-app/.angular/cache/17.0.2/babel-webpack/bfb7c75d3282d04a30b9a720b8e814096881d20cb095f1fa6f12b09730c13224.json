{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { logInUser } from 'src/app/state/actions/user.actions';\nlet LoginFormComponent = class LoginFormComponent {\n  constructor(loginService, store) {\n    this.loginService = loginService;\n    this.store = store;\n    this.isSubmitted = false;\n  }\n  ngOnInit() {\n    this.loginForm = new FormGroup({\n      userName: new FormControl('', Validators.required),\n      password: new FormControl('', Validators.required)\n    });\n  }\n  get userName() {\n    return this.loginForm.get('userName');\n  }\n  get password() {\n    return this.loginForm.get('password');\n  }\n  onSubmit(e) {\n    e.preventDefault();\n    this.isSubmitted = true;\n    if (!this.userName.value || !this.password.value) return;\n    this.loginService.logInUser(this.userName.value, this.password.value).subscribe({\n      next: data => {\n        if (data.authenticated === false) {\n          console.warn('Invalid username of password');\n          this.userName.setErrors({\n            invalidCredentials: true\n          });\n          return;\n        }\n        const user = data.user_data;\n        sessionStorage.setItem('userId', user.id);\n        sessionStorage.setItem('userFirstName', user.fname);\n        sessionStorage.setItem('userImage', user.profile_img);\n        this.store.dispatch(logInUser({\n          userId: user.id,\n          userFirstName: user.fname,\n          userImage: user.profile_img\n        }));\n        location.assign('/');\n      },\n      error: err => {\n        if (err.status === 0) {\n          // A client-side or network error occured.\n          console.error('Error:', err.error);\n        } else if (err.status !== 200) {\n          console.error(`${err.status}\\nbody: ${err.error}`);\n          console.error(err);\n        } else {\n          console.error(err);\n        }\n      }\n    });\n  }\n};\nLoginFormComponent = __decorate([Component({\n  selector: 'app-login-form',\n  templateUrl: './login-form.component.html',\n  styleUrls: ['./login-form.component.css']\n})], LoginFormComponent);\nexport { LoginFormComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}